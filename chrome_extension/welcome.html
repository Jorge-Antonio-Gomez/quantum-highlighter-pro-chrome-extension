<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bienvenido a Quantum Highlighter PRO</title>
    <link rel="stylesheet" href="libs/fonts.css">
    <link rel="stylesheet" href="welcome.css">
    <link rel="icon" href="images/icon48.png">
</head>
<body>
    <div class="container">
        <div class="language-selector-container">
            <select id="language-selector">
                <option value="en">English</option>
                <option value="es">EspaÃ±ol</option>
                <option value="fr">FranÃ§ais</option>
                <option value="pt">PortuguÃªs</option>
                <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                <option value="zh">ä¸­æ–‡</option>
            </select>
        </div>
        <header>
            <img src="images/icon128.png" alt="Quantum Highlighter Logo" class="logo">
            <h1 data-key="title">Gracias por instalar Quantum Highlighter PRO!</h1>
            <p class="subtitle" data-key="subtitle">Tu herramienta para anotar y recordar lo importante en la web.</p>
        </header>

        <main>
            <section class="feature-box">
                <h2 data-key="how_it_works">Â¿CÃ³mo funciona?</h2>
                <ol>
                    <li data-key="step1"><strong>Selecciona texto:</strong> Simplemente arrastra el cursor sobre cualquier texto en una pÃ¡gina web. <i>Â¡Puedes probar con este texto!</i></li>
                    <li data-key="step2"><strong>Elige una acciÃ³n:</strong> AparecerÃ¡ un menÃº contextual. Escoge un color para resaltar o la opciÃ³n para subrayar.</li>
                    <li data-key="step3"><strong>Gestiona tus notas:</strong> Haz clic en una anotaciÃ³n existente para cambiar su color, tipo o para eliminarla.</li>
                    <li data-key="step4"><strong>Persistencia:</strong> Tus anotaciones se guardan automÃ¡ticamente en la pÃ¡gina donde las creaste.</li>
                </ol>
            </section>

            <section class="feature-box">
                <h2 data-key="features">CaracterÃ­sticas Principales</h2>
                <ul>
                    <li data-key="feature1">ğŸ¨ <strong>MÃºltiples colores:</strong> Elige entre 8 colores vibrantes para organizar tus ideas.</li>
                    <li data-key="feature2">âœï¸ <strong>Dos tipos de anotaciÃ³n:</strong> Resaltado clÃ¡sico y subrayado.</li>
                    <li data-key="feature3">ğŸ’¾ <strong>Guardado automÃ¡tico:</strong> No te preocupes por perder tus notas.</li>
                    <li data-key="feature4">ğŸŒ <strong>Funciona en casi todas partes:</strong> Compatible con la mayorÃ­a de las pÃ¡ginas web.</li>
                    <li data-key="feature5">âŒ¨ï¸ <strong>Atajos de teclado:</strong> Usa `Esc` para cancelar una selecciÃ³n y `Supr` para borrar una nota activa.</li>
                </ul>
            </section>
        </main>

        <footer>
            <!-- <p data-key="support">Â¿Disfrutas de la extensiÃ³n? Â¡Considera apoyarme!</p> -->
            <p data-key="support">Â¿Disfrutas de la extensiÃ³n? Â¡Considera apoyarme!</p>
            <a href="https">HOLA</a>, esto es test text.
            <a href="https://www.buymeacoffee.com/georgemarrero" target="_blank" class="coffee-button" data-key="coffee">InvÃ­tame un cafÃ© â˜•</a>
        </footer>
    </div>

    <script>
        const translations = {
            'en': {
                'title': 'Thanks for installing Quantum Highlighter PRO!',
                'subtitle': 'Your tool to annotate and remember what\'s important on the web.',
                'how_it_works': 'How does it work?',
                'step1': '<strong>Select text:</strong> Simply drag your cursor over any text on a webpage. <i>You can try with this text!</i>',
                'step2': '<strong>Choose an action:</strong> A context menu will appear. Pick a color to highlight or the option to underline.',
                'step3': '<strong>Manage your notes:</strong> Click on an existing annotation to change its color, type, or to delete it.',
                'step4': '<strong>Persistence:</strong> Your annotations are automatically saved on the page where you created them.',
                'features': 'Main Features',
                'feature1': 'ğŸ¨ <strong>Multiple colors:</strong> Choose from 8 vibrant colors to organize your ideas.',
                'feature2': 'âœï¸ <strong>Two annotation types:</strong> Classic highlighting and underlining.',
                'feature3': 'ğŸ’¾ <strong>Automatic saving:</strong> Don\'t worry about losing your notes.',
                'feature4': 'ğŸŒ <strong>Works almost everywhere:</strong> Compatible with most websites.',
                'feature5': 'âŒ¨ï¸ <strong>Keyboard shortcuts:</strong> Use `Esc` to cancel a selection and `Del` to delete an active note.',
                'support': 'Enjoying the extension? Consider supporting me!',
                'coffee': 'Buy me a coffee â˜•'
            },
            'es': {
                'title': 'Â¡Gracias por instalar Quantum Highlighter PRO!',
                'subtitle': 'Tu herramienta para anotar y recordar lo importante en la web.',
                'how_it_works': 'Â¿CÃ³mo funciona?',
                'step1': '<strong>Selecciona texto:</strong> Simplemente arrastra el cursor sobre cualquier texto en una pÃ¡gina web. <i>Â¡Puedes probar con este texto!</i>',
                'step2': '<strong>Elige una acciÃ³n:</strong> AparecerÃ¡ un menÃº contextual. Escoge un color para resaltar o la opciÃ³n para subrayar.',
                'step3': '<strong>Gestiona tus notas:</strong> Haz clic en una anotaciÃ³n existente para cambiar su color, tipo o para eliminarla.',
                'step4': '<strong>Persistencia:</strong> Tus anotaciones se guardan automÃ¡ticamente en la pÃ¡gina donde las creaste.',
                'features': 'CaracterÃ­sticas Principales',
                'feature1': 'ğŸ¨ <strong>MÃºltiples colores:</strong> Elige entre 8 colores vibrantes para organizar tus ideas.',
                'feature2': 'âœï¸ <strong>Dos tipos de anotaciÃ³n:</strong> Resaltado clÃ¡sico y subrayado.',
                'feature3': 'ğŸ’¾ <strong>Guardado automÃ¡tico:</strong> No te preocupes por perder tus notas.',
                'feature4': 'ğŸŒ <strong>Funciona en casi todas partes:</strong> Compatible con la mayorÃ­a de las pÃ¡ginas web.',
                'feature5': 'âŒ¨ï¸ <strong>Atajos de teclado:</strong> Usa `Esc` para cancelar una selecciÃ³n y `Supr` para borrar una nota activa.',
                'support': 'Â¿Disfrutas de la extensiÃ³n? Â¡Considera apoyarme!',
                'coffee': 'InvÃ­tame un cafÃ© â˜•'
            },
            'fr': {
                'title': 'Merci d\'avoir installÃ© Quantum Highlighter PRO !',
                'subtitle': 'Votre outil pour annoter et mÃ©moriser ce qui est important sur le web.',
                'how_it_works': 'Comment Ã§a marche ?',
                'step1': "<strong>SÃ©lectionnez du texte :</strong> Faites simplement glisser votre curseur sur n'importe quel texte d'une page web. <i>Vous pouvez essayer avec ce texte !</i>",
                'step2': "<strong>Choisissez une action :</strong> Un menu contextuel apparaÃ®tra. Choisissez une couleur pour surligner ou l'option pour souligner.",
                'step3': '<strong>GÃ©rez vos notes :</strong> Cliquez sur une annotation existante pour changer sa couleur, son type ou pour la supprimer.',
                'step4': '<strong>Persistance :</strong> Vos annotations sont automatiquement sauvegardÃ©es sur la page oÃ¹ vous les avez crÃ©Ã©es.',
                'features': 'CaractÃ©ristiques Principales',
                'feature1': 'ğŸ¨ <strong>Plusieurs couleurs :</strong> Choisissez parmi 8 couleurs vives pour organiser vos idÃ©es.',
                'feature2': "âœï¸ <strong>Dos tipos de anotaciÃ³n :</strong> Surlignage classique y soulignement.",
                'feature3': 'ğŸ’¾ <strong>Sauvegarde automatique :</strong> Ne vous inquiÃ©tez pas de perdre vos notes.',
                'feature4': 'ğŸŒ <strong>Fonctionne presque partout :</strong> Compatible con la mayorÃ­a de los sitios web.',
                'feature5': "âŒ¨ï¸ <strong>Raccourcis clavier :</strong> Utilisez `Ã‰chap` para anular una selecciÃ³n y `Supr` para borrar una nota activa.",
                'support': "Vous apprÃ©ciez l'extension ? Envisagez de me soutenir !",
                'coffee': 'Offrez-moi un cafÃ© â˜•'
            },
            'pt': {
                'title': 'Obrigado por instalar o Quantum Highlighter PRO!',
                'subtitle': 'Sua ferramenta para anotar e lembrar o que Ã© importante na web.',
                'how_it_works': 'Como funciona?',
                'step1': '<strong>Selecione o texto:</strong> Simplesmente arraste o cursor sobre qualquer texto em uma pÃ¡gina da web. <i>VocÃª pode tentar com este texto!</i>',
                'step2': '<strong>Escolha uma aÃ§Ã£o:</strong> Um menu de contexto aparecerÃ¡. Escolha uma cor para destacar ou a opÃ§Ã£o para sublinhar.',
                'step3': '<strong>Gerencie suas anotaÃ§Ãµes:</strong> Clique em uma anotaÃ§Ã£o existente para alterar sua cor, tipo ou para excluÃ­-la.',
                'step4': '<strong>PersistÃªncia:</strong> Suas anotaÃ§Ãµes sÃ£o salvas automaticamente na pÃ¡gina onde vocÃª as criou.',
                'features': 'Principais CaracterÃ­sticas',
                'feature1': 'ğŸ¨ <strong>MÃºltiplas cores:</strong> Escolha entre 8 cores vibrantes para organizar suas ideias.',
                'feature2': 'âœï¸ <strong>Dois tipos de anotaÃ§Ã£o:</strong> Destaque clÃ¡ssico e sublinhado.',
                'feature3': 'ğŸ’¾ <strong>Salvamento automÃ¡tico:</strong> NÃ£o se preocupe em perder suas anotaÃ§Ãµes.',
                'feature4': 'ğŸŒ <strong>Funciona em quase todos os lugares:</strong> CompatÃ­vel com a maioria dos sites.',
                'feature5': 'âŒ¨ï¸ <strong>Atalhos de teclado:</strong> Use `Esc` para cancelar uma seleÃ§Ã£o y `Del` para excluir una nota activa.',
                'support': 'Gostando da extensÃ£o? Considere me apoiar!',
                'coffee': 'Pague-me um cafÃ© â˜•'
            },
            'ru': {
                'title': 'Ğ¡Ğ¿Ğ°ÑĞ¸Ğ±Ğ¾ Ğ·Ğ° ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºÑƒ Quantum Highlighter PRO!',
                'subtitle': 'Ğ’Ğ°Ñˆ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ para Ğ°Ğ½Ğ½Ğ¾Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸ Ğ·Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ Ğ²Ğ°Ğ¶Ğ½Ğ¾Ğ³Ğ¾ Ğ² Ğ˜Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ğµ.',
                'how_it_works': 'ĞšĞ°Ğº ÑÑ‚Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚?',
                'step1': '<strong>Ğ’Ñ‹Ğ´ĞµĞ»Ğ¸Ñ‚Ğµ Ñ‚ĞµĞºÑÑ‚:</strong> ĞŸÑ€Ğ¾ÑÑ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ ĞºÑƒÑ€ÑĞ¾Ñ€Ğ¾Ğ¼ Ğ¿Ğ¾ Ğ»ÑĞ±Ğ¾Ğ¼Ñƒ Ñ‚ĞµĞºÑÑ‚Ñƒ Ğ½Ğ° Ğ²ĞµĞ±-ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğµ. <i>Ğ’Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ¿Ğ¾Ğ¿Ñ€Ğ¾Ğ±Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ½Ğ° ÑÑ‚Ğ¾Ğ¼ Ñ‚ĞµĞºÑÑ‚Ğµ!</i>',
                'step2': '<strong>Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ:</strong> ĞŸĞ¾ÑĞ²Ğ¸Ñ‚ÑÑ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ñ†Ğ²ĞµÑ‚ Ğ´Ğ»Ñ Ğ²Ñ‹Ğ´ĞµĞ»ĞµĞ½Ğ¸Ñ Ğ¸Ğ»Ğ¸ Ğ¾Ğ¿Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ´Ñ‡ĞµÑ€ĞºĞ¸Ğ²Ğ°Ğ½Ğ¸Ñ.',
                'step3': '<strong>Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞ¹Ñ‚Ğµ ÑĞ²Ğ¾Ğ¸Ğ¼Ğ¸ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ°Ğ¼Ğ¸:</strong> ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Ğ½Ğ° ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ÑƒÑ Ğ°Ğ½Ğ½Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ ĞµĞµ Ñ†Ğ²ĞµÑ‚, Ñ‚Ğ¸Ğ¿ Ğ¸Ğ»Ğ¸ ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ĞµĞµ.',
                'step4': '<strong>Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ:</strong> Ğ’Ğ°ÑˆĞ¸ Ğ°Ğ½Ğ½Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑÑ‚ÑÑ Ğ½Ğ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğµ, Ğ³Ğ´Ğµ Ğ²Ñ‹ Ğ¸Ñ… ÑĞ¾Ğ·Ğ´Ğ°Ğ»Ğ¸.',
                'features': 'ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸',
                'feature1': 'ğŸ¨ <strong>ĞĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ñ†Ğ²ĞµÑ‚Ğ¾Ğ²:</strong> Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°Ğ¹Ñ‚Ğµ Ğ¸Ğ· 8 ÑÑ€ĞºĞ¸Ñ… Ñ†Ğ²ĞµÑ‚Ğ¾Ğ² Ğ´Ğ»Ñ Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ ÑĞ²Ğ¾Ğ¸Ñ… Ğ¸Ğ´ĞµĞ¹.',
                'feature2': 'âœï¸ <strong>Ğ”Ğ²Ğ° Ñ‚Ğ¸Ğ¿Ğ° Ğ°Ğ½Ğ½Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ğ¹:</strong> ĞšĞ»Ğ°ÑÑĞ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ²Ñ‹Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ¸ Ğ¿Ğ¾Ğ´Ñ‡ĞµÑ€ĞºĞ¸Ğ²Ğ°Ğ½Ğ¸Ğµ.',
                'feature3': 'ğŸ’¾ <strong>ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ:</strong> ĞĞµ Ğ±ĞµÑĞ¿Ğ¾ĞºĞ¾Ğ¹Ñ‚ĞµÑÑŒ Ğ¾ Ğ¿Ğ¾Ñ‚ĞµÑ€Ğµ ÑĞ²Ğ¾Ğ¸Ñ… Ğ·Ğ°Ğ¼ĞµÑ‚Ğ¾Ğº.',
                'feature4': 'ğŸŒ <strong>Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ¿Ğ¾Ñ‡Ñ‚Ğ¸ Ğ²ĞµĞ·Ğ´Ğµ:</strong> Ğ¡Ğ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ğ½ÑÑ‚Ğ²Ğ¾Ğ¼ Ğ²ĞµĞ±-ÑĞ°Ğ¹Ñ‚Ğ¾Ğ².',
                'feature5': 'âŒ¨ï¸ <strong>Ğ“Ğ¾Ñ€ÑÑ‡Ğ¸Ğµ ĞºĞ»Ğ°Ğ²Ğ¸ÑˆĞ¸:</strong> Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ `Esc` para Ğ¾Ñ‚Ğ¼ĞµĞ½Ñ‹ Ğ²Ñ‹Ğ´ĞµĞ»ĞµĞ½Ğ¸Ñ y `Del` para ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ¹ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸.',
                'support': 'ĞÑ€Ğ°Ğ²Ğ¸Ñ‚ÑÑ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ? ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚Ğµ Ğ¼ĞµĞ½Ñ!',
                'coffee': 'ĞšÑƒĞ¿Ğ¸Ñ‚Ğµ Ğ¼Ğ½Ğµ ĞºĞ¾Ñ„Ğµ â˜•'
            },
            'zh': {
                'title': 'æ„Ÿè°¢æ‚¨å®‰è£… Quantum Highlighter PROï¼',
                'subtitle': 'æ‚¨åœ¨ç½‘ç»œä¸Šæ³¨é‡Šå’Œè®°å¿†é‡è¦å†…å®¹çš„å·¥å…·ã€‚',
                'how_it_works': 'å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ',
                'step1': '<strong>é€‰æ‹©æ–‡æœ¬ï¼š</strong> åªéœ€å°†å…‰æ ‡æ‹–åˆ°ç½‘é¡µä¸Šçš„ä»»ä½•æ–‡æœ¬ä¸Šã€‚ <i>ä½ å¯ä»¥ç”¨è¿™æ®µæ–‡å­—è¯•è¯•ï¼</i>',
                'step2': '<strong>é€‰æ‹©ä¸€ä¸ªæ“ä½œï¼š</strong> å°†å‡ºç°ä¸€ä¸ªä¸Šä¸‹æ–‡èœå•ã€‚é€‰æ‹©ä¸€ç§é¢œè‰²ä»¥çªå‡ºæ˜¾ç¤ºæˆ–é€‰æ‹©ä¸‹åˆ’çº¿é€‰é¡¹ã€‚',
                'step3': '<strong>ç®¡ç†æ‚¨çš„ç¬”è®°ï¼š</strong> å•å‡»ç°æœ‰çš„æ³¨é‡Šä»¥æ›´æ”¹å…¶é¢œè‰²ã€ç±»å‹æˆ–å°†å…¶åˆ é™¤ã€‚',
                'step4': '<strong>æŒä¹…æ€§ï¼š</strong> æ‚¨çš„æ³¨é‡Šä¼šè‡ªåŠ¨ä¿å­˜åœ¨æ‚¨åˆ›å»ºå®ƒä»¬çš„é¡µé¢ä¸Šã€‚',
                'features': 'ä¸»è¦ç‰¹ç‚¹',
                'feature1': 'ğŸ¨ <strong>å¤šç§é¢œè‰²ï¼š</strong> ä»8ç§é²œè‰³çš„é¢œè‰²ä¸­é€‰æ‹©ï¼Œä»¥ç»„ç»‡æ‚¨çš„æƒ³æ³•ã€‚',
                'feature2': 'âœï¸ <strong>ä¸¤ç§æ³¨é‡Šç±»å‹ï¼š</strong> ç»å…¸é«˜äº®å’Œä¸‹åˆ’çº¿ã€‚',
                'feature3': 'ğŸ’¾ <strong>è‡ªåŠ¨ä¿å­˜ï¼š</strong> ä¸ç”¨æ‹…å¿ƒä¸¢å¤±ç¬”è®°ã€‚',
                'feature4': 'ğŸŒ <strong>å‡ ä¹æ— å¤„ä¸åœ¨ï¼š</strong> ä¸å¤§å¤šæ•°ç½‘ç«™å…¼å®¹ã€‚',
                'feature5': 'âŒ¨ï¸ <strong>é”®ç›˜å¿«æ·é”®ï¼š</strong> ä½¿ç”¨ `Esc` å–æ¶ˆé€‰æ‹©ï¼Œä½¿ç”¨ `Del` åˆ é™¤æ´»åŠ¨ç¬”è®°ã€‚',
                'support': 'å–œæ¬¢è¿™ä¸ªæ‰©å±•å—ï¼Ÿè€ƒè™‘æ”¯æŒæˆ‘ï¼',
                'coffee': 'ç»™æˆ‘ä¹°æ¯å’–å•¡â˜•'
            }
        };

        function setLanguage(lang) {
            const langTranslations = translations[lang] || translations['en'];
            document.querySelectorAll('[data-key]').forEach(element => {
                const key = element.getAttribute('data-key');
                if (langTranslations[key]) {
                    element.innerHTML = langTranslations[key];
                }
            });
            document.documentElement.lang = lang;
            // Save language preference to chrome.storage.sync
            if (typeof chrome !== 'undefined' && chrome.storage && chrome.storage.sync) {
                chrome.storage.sync.set({ 'language': lang }, () => {
                    if (chrome.runtime.lastError) {
                        console.error("Error saving language to chrome.storage.sync: ", chrome.runtime.lastError);
                    }
                });
            } else {
                console.warn("chrome.storage.sync not available. Running outside Chrome Extension context?");
            }
        }

        // Initialize language selector and set initial language
        document.addEventListener('DOMContentLoaded', () => {
            const languageSelector = document.getElementById('language-selector');

            if (typeof chrome !== 'undefined' && chrome.storage && chrome.storage.sync) {
                // Get language from chrome.storage.sync or use browser language
                chrome.storage.sync.get('language', (data) => {
                    let userLang = data.language || navigator.language.split('-')[0];
                    if (!translations[userLang]) {
                        userLang = 'en'; // Default to English if unsupported
                    }
                    languageSelector.value = userLang;
                    setLanguage(userLang);
                });
            } else {
                console.warn("chrome.storage.sync not available. Running outside Chrome Extension context?");
                let userLang = navigator.language.split('-')[0];
                if (!translations[userLang]) {
                    userLang = 'en'; // Default to English if unsupported
                }
                languageSelector.value = userLang;
                setLanguage(userLang);
            }

            languageSelector.addEventListener('change', (event) => {
                setLanguage(event.target.value);
            });
        });
    </script>
</body>
</html>
